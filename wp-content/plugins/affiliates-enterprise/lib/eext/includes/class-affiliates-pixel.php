<?php
 class Affiliates_Pixel { private $home = null; private $pname = null; private $parametric = false; const IXAP49 = 1; public function __construct( $IXAP50, $IXAP5 ) { $IXAP50 = rtrim( $IXAP50, '/\\' ) . '/'; $this->home = $IXAP50; $this->pname = $IXAP5; } public function __set( $name, $value ) { switch( $name ) { case 'home' : case 'pname' : $this->$name = $value; break; case 'parametric' : $this->parametric = (bool) $value; break; } } public function __get( $name ) { switch( $name ) { case 'home' : case 'pname' : case 'parametric' : return $this->$name; break; default : return null; } } public function get_pixel_url() { if ( !$this->parametric ) { $IXAP30 = $this->home . $this->get_pixel_name(); } else { $IXAP30 = add_query_arg( array( str_replace( '.', '_', $this->get_pixel_name() ) => self::IXAP49 ), $this->home ); } return $IXAP30; } public function get_pixel_name() { return $this->pname . '.png'; } public function is_pixel_request( $IXAP30 ) { $IXAP51 = str_replace( '.', '_', $this->get_pixel_name() ); if ( isset( $_REQUEST[$IXAP51] ) && ( $_REQUEST[$IXAP51] == self::IXAP49 ) ) { $IXAP11 = true; } else { $IXAP52 = parse_url( $IXAP30 ); $IXAP53 = parse_url( $this->home ); $IXAP54 = str_replace( $IXAP53['path'], '', $IXAP52['path'] ); $IXAP11 = $IXAP54 == $this->get_pixel_name(); } return $IXAP11; } public function pixel() { header( 'Content-Type: image/png' ); header( 'Pragma: no-cache'); header( 'Cache-Control: no-cache, no-store' ); header( 'Expires: 0'); if ( $IXAP55 = @file_get_contents( AFFILIATES_PLUGIN_URL . '/images/pixel.png' ) ) { die( $IXAP55 ); } } public static function init() { } } Affiliates_Pixel::init(); 