<?php
 class Affiliates_Mail { private $mailer = 'mail'; private $charset = 'UTF-8'; public function __set( $name, $value ) { switch ( $name ) { case 'mailer' : $this->mailer = $value; break; case 'charset' : $this->charset = $value; break; } } public function __get( $name ) { $IXAP11 = null; switch ( $name ) { case 'mailer' : $IXAP11 = $this->mailer; break; case 'charset' : $IXAP11 = $this->charset; break; } return $IXAP11; } public function __construct() { } public function mail( $IXAP184, $subject, $message, $tokens = array(), $data_tokens = array(), $data = array() ) { $headers = 'MIME-Version: 1.0' . "\r\n"; $headers .= 'Content-type: text/html; charset="' . get_option( 'blog_charset' ) . '"' . "\r\n"; foreach ( $tokens as $key => $value ) { if ( key_exists( $key, $tokens ) ) { $substitute = $tokens[$key]; $subject = str_replace( "[" . $key . "]", $substitute, $subject ); $message = str_replace( "[" . $key . "]", $substitute, $message ); } } foreach ( $data_tokens as $IXAP206 ) { if ( isset( $data[$IXAP206]['value'] ) ) { $substitute = Affiliates_Utility::filter( $data[$IXAP206]['value'] ); } else { $substitute = ""; } $subject = str_replace( "[" . $IXAP206 . "]", $substitute, $subject ); $message = str_replace( "[" . $IXAP206 . "]", $substitute, $message ); } @call_user_func( $this->mailer, $IXAP184, $subject, $message, $headers ); } }